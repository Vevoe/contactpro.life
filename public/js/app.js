!function(t){function e(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,o){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,a){a(1),t.exports=a(2)},function(t,e){window.contactsPro={baseFormValidation:{highlight:function(t){$(t).closest(".form-group").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(t,e){e.parent(".input-group").length?t.insertAfter(e.parent()):t.insertAfter(e)},rules:{name:{required:!0,maxlength:255},surname:{required:!0,maxlength:255},email:{required:!0,maxlength:255},phone:{required:!0,maxlength:255,number:!0}}},buildCustomFieldsString:function(t){var e="",a=t.length-1;return $.each(t,function(t,o){e+=t==a?o.value:o.value+", "}),e},createFormSubmit:{submitHandler:function(t){var e=$(t).serialize();$.ajax({url:"/api/contacts",method:"POST",data:e}).done(function(t){$("#createContactModal").modal("hide");var e=window.contactsPro.buildCustomFieldsString(t.data.customFields),a=_.template($("#newRowTemplate").html());$("table tbody").append(a({id:t.data.id,name:t.data.name,surname:t.data.surname,email:t.data.email,phone:t.data.phone,customFields:e})),$(".no-contacts").addClass("hidden"),$(".contacts-container").removeClass("hidden"),$("#createContactForm .custom-fields-container > .form-group").not(":first").remove(),$("#createContactForm").trigger("reset"),$.toast({heading:"Success!",text:"Conatct has been created.",position:"top-right",icon:"success"})}).fail(function(t){var e={};$.each(t.responseJSON.errors,function(t,a){e[t]=a}),$("#createContactForm").validate().showErrors(e),t.status>=500&&$.toast({heading:"Error!",text:"An Error as occurred. Please contact support.",position:"top-right",icon:"error"})})}},updateFormSubmit:{submitHandler:function(t){var e=$(t).serialize(),a=$(t).find('input[name="id"]').val();$.ajax({url:"/api/contacts/"+a,method:"PUT",data:e}).done(function(t){var e=window.contactsPro.buildCustomFieldsString(t.data.customFields);$('table tr[contactRow="'+t.data.id+'"]').find("td[name]").text(t.data.name),$('table tr[contactRow="'+t.data.id+'"]').find("td[surname]").text(t.data.surname),$('table tr[contactRow="'+t.data.id+'"]').find("td[email]").text(t.data.email),$('table tr[contactRow="'+t.data.id+'"]').find("td[phone]").text(t.data.phone),$('table tr[contactRow="'+t.data.id+'"]').find("td[customFields]").text(e),$("#updateContactModal").modal("hide"),$("#updateContactForm .custom-fields-container > .form-group").remove(),$("#updateContactForm").trigger("reset"),$.toast({heading:"Success!",text:"Conatct has been updated.",position:"top-right",icon:"success"})}).fail(function(t){var e={};$.each(t.responseJSON.errors,function(t,a){e[t]=a}),$("#updateContactForm").validate().showErrors(e),t.status>=500&&$.toast({heading:"Error!",text:"An Error as occurred. Please contact support.",position:"top-right",icon:"error"})})}}},$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("table").tableable({filter:{filterInputSelector:"#searchBox",ignoreCase:!0}}),$(document).on("click","button[add-custom-field]",function(){var t=$(this).closest("form").attr("id"),e=$("#"+t+" .custom-fields-container input").length;if(e<5){var a=_.template($("#customFieldTemplate").html());$("#"+t+" .custom-fields-container").append(a({fieldName:++e,value:""}))}}),$(document).on("click","button[remove-custom-field]",function(){var t=$(this).closest("form").attr("id");$("#"+t+" .custom-fields-container input").length>1&&$(this).closest(".form-group").remove()}),$("button[cancel-contact]").on("click",function(){var t=$(this).closest("form").attr("id");"createContactForm"===t?$("#"+t+" .custom-fields-container > .form-group").not(":first").remove():$("#"+t+" .custom-fields-container > .form-group").remove(),$("#"+t).trigger("reset")}),$(document).on("click",".contacts-container table button[editContact]",function(){$.ajax({url:"/api/contacts/"+$(this).attr("editContact"),method:"GET"}).done(function(t){$('#updateContactForm input[name="id"]').val(t.data.id),$('#updateContactForm input[name="name"]').val(t.data.name),$('#updateContactForm input[name="surname"]').val(t.data.surname),$('#updateContactForm input[name="email"]').val(t.data.email),$('#updateContactForm input[name="phone"]').val(t.data.phone);var e=_.template($("#customFieldTemplate").html());t.data.customFields.length>0?$.each(t.data.customFields,function(t,a){$("#updateContactForm .custom-fields-container").append(e({fieldName:++t,value:a.value}))}):$("#updateContactForm .custom-fields-container").append(e({fieldName:1,value:""})),$("#updateContactModal").modal("show")}).fail(function(t){t.status>=500&&$.toast({heading:"Error!",text:"An Error as occurred. Please contact support.",position:"top-right",icon:"error"})})}),$("#createContactForm").validate($.extend({},window.contactsPro.baseFormValidation,window.contactsPro.createFormSubmit)),$("#updateContactForm").validate($.extend({},window.contactsPro.baseFormValidation,window.contactsPro.updateFormSubmit)),$(document).on("click","table button[delete-contact-button]",function(t){t.preventDefault(),$("button[delete-contact-id]").attr("delete-contact-id",$(this).attr("delete-contact-button"))}),$("button[delete-contact-id]").on("click",function(){$('table button[delete-contact-button="'+$(this).attr("delete-contact-id")+'"]').parent().submit()})})},function(t,e){}]);